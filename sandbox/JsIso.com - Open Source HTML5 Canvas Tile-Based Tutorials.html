<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0062)http://jsiso.com/tutorials/isometric-engine-basics-source.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="description" content="JsIso - An Open Source HTML5 Tile Based Engine">

    <title>JsIso.com - Open Source HTML5 Canvas Tile-Based Tutorials</title>

    <link href="./JsIso.com - Open Source HTML5 Canvas Tile-Based Tutorials_files/css" rel="stylesheet" type="text/css">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="icon" type="image/ico" href="http://www.jsiso.com/favicon.ico">
    <link rel="stylesheet" type="text/css" href="./JsIso.com - Open Source HTML5 Canvas Tile-Based Tutorials_files/main.css">
    <link rel="stylesheet" type="text/css" href="./JsIso.com - Open Source HTML5 Canvas Tile-Based Tutorials_files/prettify.css">
    <script>

      // Create the isometric scope.
      // Tutorial Note: Wrapping all our code within a function this way means all
      // our variables and functions don't become globals. It's a nice thing.
      (function(isometric) {

        // Two Dimensional Array storing our isometric map layout. Each number represents a tile.
       /*
        var map = [
          [1,0,0,0],
          [1,0,0,1],
          [0,0,1,1],
          [1,1,1,1]
        ];
        */
       var map = [
            1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1
       ]; 
        var tileGraphics = [];

        function loadImg() {

          // Images to be loaded and used. JS needs images to be loaded before they are accessed.
          // Tutorial Note: As water is loaded first it will be represented by a 0 on the map and land will be a 1.
          var tileGraphicsToLoad = ["water.png","land.png"],
          tileGraphicsLoaded = 0;

          for (var i = 0; i < tileGraphicsToLoad.length; i++) {
            tileGraphics[i] = new Image();
            tileGraphics[i].src = tileGraphicsToLoad[i];
            tileGraphics[i].onload = function() {
              // Once the image is loaded increment the loaded graphics count and check if all images are ready.
              tileGraphicsLoaded++;
              if (tileGraphicsLoaded === tileGraphicsToLoad.length) {
                  drawMap();
              }
            }
          }

        }


        function drawMap() {

          // create the canvas context
          var ctx = document.getElementById('main').getContext('2d');

          // Set as your tile pixel sizes, alter if you are using larger tiles.
          var tileH = 25;
          var tileW = 52;

          // mapX and mapY are offsets to make sure we can position the map as we want.
          var mapX = 76;
          var mapY = 52;

          var drawTile;

          // loop through our map and draw out the image represented by the number.
        for (var j = 0; j < map.length; j++) {
            for (var i = 0; i < map[j].length; i++) {
              drawTile = map[i][j];
              // Draw the represented image number, at the desired X & Y coordinates followed by the graphic width and height.
              ctx.drawImage(tileGraphics[drawTile], (i - j) * tileH + mapX, (i + j) * tileH / 2 + mapY);
              "debugger";
            }
          }
        }

        function init() {
          // Remove Event Listener and load images.
          isometric.removeEventListener('load', init);
          loadImg();
        };

        // Add Event Listener to dectect when page has fully loaded.
        isometric.addEventListener('load', init, false);

      })(this);

    </script>
  </head>
  <body>
    <canvas id="main" width="208" height="158"></canvas>

</body></html>
